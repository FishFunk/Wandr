<ion-header>
    <ion-navbar>
        <button ion-button icon-only clear *ngIf="!showProfileSlide" (click)="closeModal()">
            <ion-icon name="close"></ion-icon>
        </button>
        <button ion-button icon-only clear *ngIf="showProfileSlide" (click)="backSlide()">
            <ion-icon name="arrow-back"></ion-icon>
        </button>

        <ion-title end>{{locationStringFormat}}</ion-title>
    </ion-navbar>
</ion-header>
<ion-content>
    <ion-slides [ngClass]="{'scroll': !showProfileSlide }">
        <ion-slide id="slide-1">
            <div padding>
                <ion-segment [(ngModel)]="view">
                    <ion-segment-button value="first">
                    1st Degree
                    </ion-segment-button>
                    <ion-segment-button value="second">
                    2nd Degree
                    </ion-segment-button>
                    <ion-segment-button value="forum">
                    Local Forum
                    </ion-segment-button>
                </ion-segment>
            </div>      
            <div [ngSwitch]="view">
                <ion-list *ngSwitchCase="'first'">
                    <div *ngIf="firstConnections.length == 0" class="container" text-center>
                        <p>You have no first degree connections here... yet!</p>
                    </div>
                    <button ion-item *ngFor="let user of firstConnections" (click)="onClickProfile(user)">
                        <ion-thumbnail item-start>
                            <img src="{{user.profile_img_url}}">                  
                        </ion-thumbnail>
                        <label class="list-name">{{user.first_name}}</label>
                        <div>
                            <ion-icon class="mini-icon" *ngIf="user.services.host" name="home"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.tips" name="information-circle"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.meetup" name="contacts"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.emergencyContact" name="call"></ion-icon>
                        </div>
                        <p>{{user.bio}}</p>
                    </button>
                </ion-list>
                <ion-list *ngSwitchCase="'second'">
                    <div *ngIf="secondConnections.length == 0" class="container" text-center>
                        <p>You have no second degree connections here... yet!</p>
                    </div>
                    <button ion-item *ngFor="let user of secondConnections" (click)="onClickProfile(user)">
                        <ion-thumbnail item-start>
                            <img src="{{user.profile_img_url}}">
                        </ion-thumbnail>
                        <label class="list-name">{{user.first_name}}</label>
                        <div>
                            <ion-icon class="mini-icon" *ngIf="user.services.host" name="home"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.tips" name="information-circle"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.meetup" name="contacts"></ion-icon>
                            &nbsp;
                            <ion-icon class="mini-icon" *ngIf="user.services.emergencyContact" name="call"></ion-icon>
                        </div>
                        <p>Mutual friend: {{user.mutualConnectionInfo.first_name}} {{user.mutualConnectionInfo.last_name}}</p>
                    </button>
                </ion-list>
            </div>
        </ion-slide>
        <ion-slide id="slide-2">
            <ion-card text-center padding>
                <ion-card-header>
                    <ion-avatar class="image-md">
                        <img src="{{focusedConnection.profile_img_url}}"/>
                    </ion-avatar>
                    <h1>{{focusedConnection.first_name}} {{focusedConnection.last_name}}</h1>
                </ion-card-header>
                <strong>Lives in: </strong><span>{{focusedConnection.location.stringFormat}}</span>
                <div *ngIf="focusedConnection.mutualConnectionInfo">
                    <strong>Mutual friend: </strong><span>{{focusedConnection.mutualConnectionInfo.first_name}} {{focusedConnection.mutualConnectionInfo.last_name}}</span>
                </div>
                <hr>
                <ion-list no-lines text-wrap>
                    <ion-list-header>
                        <h2> About</h2>
                    </ion-list-header>
                    <ion-item>
                        <p>{{focusedConnection.bio}}</p>
                    </ion-item>
                </ion-list>
                <ion-grid text-center>
                    <ion-row>
                        <ion-col *ngIf="focusedConnection.services.host">
                            <ion-icon name="home"></ion-icon><br>
                            <p>Host</p>
                        </ion-col>
                
                        <ion-col *ngIf="focusedConnection.services.tips">      
                            <ion-icon name="information-circle"></ion-icon><br>
                            <p>Local Tips</p>
                        </ion-col>
                
                        <ion-col *ngIf="focusedConnection.services.meetup">   
                            <ion-icon name="contacts"></ion-icon><br>
                            <p>Meetup</p>
                        </ion-col>
                
                        <ion-col *ngIf="focusedConnection.services.emergencyContact">
                            <ion-icon name="call"></ion-icon><br>
                            <p>Emergency Contact</p>
                        </ion-col>            
                    </ion-row>
                </ion-grid> 
                <button ion-button icon-end (click)="onClickSendMessage()" [disabled]="disableMessageButton">
                    <div *ngIf="!disableMessageButton">
                        <span>Send Message</span>
                        <ion-icon name="text"></ion-icon>
                    </div>
                    <span *ngIf="disableMessageButton">Chat Created</span>
                </button>
            </ion-card>
        </ion-slide>
    </ion-slides>
</ion-content>